/* ================================
   Cover pour la page show
   ================================ */

.svg-full-height {
  height: calc(100dvh - 100px);
  width: calc(((100dvh - 100px))*250/350);
  display: block;
  overflow: visible; /* évite tout rognage du SVG à l’affichage */
}

@media (max-width: 1024px) and (max-aspect-ratio: 250/400) {
  .svg-full-height {
    height: auto;
    width: 100vw;
  }
}

/* ================================
   Form Editor Layout
   ================================ */

.form-editor {
  --controls-height: 174px; /* 24px toggle + 150px contenu */
  --navbar-height: 50px;
  --controls-min-width: 350px;
  --left-panel-width: calc((100dvh - var(--navbar-height) - var(--controls-height)) * 250 / 350);

  &.controls-collapsed {
    --controls-height: 24px;
  }
}

/* Panneau gauche : couverture + contrôles */
.form-left-panel {
  display: flex;
  flex-direction: column;
  align-items: center;
  height: calc(100dvh - var(--navbar-height));
  flex-shrink: 0;
  position: relative;
  z-index: 30;

  @media (min-width: 1024px) {
    position: fixed;
    top: var(--navbar-height);
    left: 0;
    width: #{"max(var(--controls-min-width), var(--left-panel-width))"};
  }
}

/* Wrapper de la couverture — centre le SVG dans l'espace disponible */
.form-cover-wrapper {
  flex: 1 1 0%;
  min-height: 0;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Conteneur SVG de la couverture — ratio 250:350 */
.form-cover-svg {
  display: block;

  /* min() gère portrait (contraint par largeur) et paysage (contraint par hauteur) */
  width: #{"min(calc((100dvh - var(--navbar-height) - var(--controls-height)) * 250 / 350), 100vw)"};
  height: #{"min(calc(100dvh - var(--navbar-height) - var(--controls-height)), calc(100vw * 350 / 250))"};
}

/* Panneau de contrôles (escamotable) */
.form-controls {
  height: var(--controls-height);
  overflow: hidden;
  flex-shrink: 0;
  width: 100%;
}

/* Panneau de contenu (droite) */
.form-right-panel {
  @media (min-width: 1024px) {
    margin-left: #{"max(var(--controls-min-width), var(--left-panel-width))"};
  }
}

/* Transitions uniquement pendant le toggle (pas pendant le resize navigateur) */
.form-editor.is-animating {
  .form-cover-svg {
    transition: width 0.3s ease, height 0.3s ease;
  }
  .form-controls {
    transition: height 0.3s ease;
  }
  .form-right-panel {
    transition: margin-left 0.3s ease;
  }
}